# ç¬¬15ç« :å¸–å­åˆ—è¡¨åˆ†é¡µå®ç°

> **æœ¬ç« å¯¼è¯»**
>
> å¸–å­å¯ä»¥åˆ›å»ºå’ŒæŸ¥çœ‹è¯¦æƒ…äº†,ä½†ç”¨æˆ·è¿˜éœ€è¦ä¸€ä¸ª**å¸–å­åˆ—è¡¨é¡µ**æ¥æµè§ˆæ‰€æœ‰å¸–å­ã€‚å¦‚æœä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰æ•°æ®,æ•°æ®åº“ä¼šç‚¸,å‰ç«¯ä¼šå¡,ç”¨æˆ·ä½“éªŒæå·®ã€‚
>
> **åˆ†é¡µ(Pagination)**æ˜¯è§£å†³å¤§æ•°æ®é‡å±•ç¤ºçš„ç»å…¸æ–¹æ¡ˆã€‚æœ¬ç« å°†æ·±å…¥è®²è§£åˆ†é¡µæŸ¥è¯¢çš„å®ç°åŸç†ã€æ€§èƒ½ä¼˜åŒ–,ä»¥åŠå¦‚ä½•ä¼˜é›…åœ°å¤„ç†è¾¹ç•Œæƒ…å†µã€‚

---

## ğŸ“š æœ¬ç« ç›®æ ‡

å­¦å®Œæœ¬ç« ,ä½ å°†æŒæ¡:

1. ç†è§£åˆ†é¡µçš„å¿…è¦æ€§å’Œå·¥ä½œåŸç†
2. å®ç°åŸºäºLIMIT OFFSETçš„åˆ†é¡µæŸ¥è¯¢
3. æŒæ¡åˆ†é¡µå‚æ•°çš„è·å–å’Œæ ¡éªŒ
4. ç†è§£LIMIT OFFSETçš„æ€§èƒ½é—®é¢˜
5. å­¦ä¹ æ¸¸æ ‡åˆ†é¡µ(Cursor Pagination)æ–¹æ¡ˆ
6. å¤„ç†ç©ºæ•°æ®å’Œè¾¹ç•Œæƒ…å†µ
7. ä¼˜åŒ–N+1æŸ¥è¯¢é—®é¢˜
8. å®ç°å‰ç«¯åˆ†é¡µå™¨ç»„ä»¶å¯¹æ¥

---

## 1. ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µ?

### 1.1 é—®é¢˜åœºæ™¯

**å‡è®¾Bluebellæœ‰10ä¸‡ä¸ªå¸–å­:**

**âŒ ä¸åˆ†é¡µ:**
```go
func GetAllPosts() ([]*Post, error) {
	// SELECT * FROM post;  â† æŸ¥è¯¢10ä¸‡æ¡æ•°æ®!
}
```

**é—®é¢˜:**
1. **æ•°æ®åº“å‹åŠ›å¤§**: ä¸€æ¬¡æ€§è¯»å–10ä¸‡è¡Œæ•°æ®
2. **ç½‘ç»œä¼ è¾“æ…¢**: 10ä¸‡æ¡æ•°æ®å¯èƒ½æœ‰å‡ åMB
3. **å‰ç«¯æ¸²æŸ“å¡**: æµè§ˆå™¨æ¸²æŸ“10ä¸‡ä¸ªDOMå…ƒç´ ä¼šå´©æºƒ
4. **ç”¨æˆ·ä½“éªŒå·®**: ç”¨æˆ·åªèƒ½çœ‹å‰å‡ æ¡,åé¢çš„æ•°æ®ç™½ç™½æµªè´¹

---

**âœ… ä½¿ç”¨åˆ†é¡µ:**
```go
func GetPostList(page, size int) ([]*Post, error) {
	// SELECT * FROM post LIMIT 10 OFFSET 0;  â† åªæŸ¥10æ¡
}
```

**å¥½å¤„:**
- ğŸ“Š **æ•°æ®åº“**: æ¯æ¬¡åªæŸ¥è¯¢å°‘é‡æ•°æ®
- ğŸš€ **ç½‘ç»œ**: ä¼ è¾“æ•°æ®é‡å°,é€Ÿåº¦å¿«
- ğŸ’» **å‰ç«¯**: æ¸²æŸ“å‹åŠ›å°,ä½“éªŒæµç•…
- ğŸ‘ **ç”¨æˆ·**: å¿«é€Ÿçœ‹åˆ°å†…å®¹,æŒ‰éœ€ç¿»é¡µ

---

### 1.2 åˆ†é¡µçš„æ ¸å¿ƒæ¦‚å¿µ

```
æ€»æ•°æ®:  [1][2][3][4][5][6][7][8][9][10][11][12]...
         â†“
ç¬¬1é¡µ:   [1][2][3][4][5]
ç¬¬2é¡µ:                [6][7][8][9][10]
ç¬¬3é¡µ:                              [11][12][13][14][15]
```

**æ ¸å¿ƒå‚æ•°:**
- **page**: é¡µç (ä»1å¼€å§‹)
- **size**: æ¯é¡µæ¡æ•°(pageSize)
- **offset**: åç§»é‡ = (page - 1) * size
- **total**: æ€»è®°å½•æ•°

**ç¤ºä¾‹è®¡ç®—:**
```
page=1, size=10 â†’ offset=0  â†’ LIMIT 10 OFFSET 0  â†’ ç¬¬1-10æ¡
page=2, size=10 â†’ offset=10 â†’ LIMIT 10 OFFSET 10 â†’ ç¬¬11-20æ¡
page=3, size=10 â†’ offset=20 â†’ LIMIT 10 OFFSET 20 â†’ ç¬¬21-30æ¡
```

---

## 2. æ•°æ®æ¨¡å‹å®šä¹‰

### 2.1 åˆ†é¡µå‚æ•°ç»“æ„ä½“

```go
// models/params.go
package models

const (
	OrderTime  = "time"  // æŒ‰æ—¶é—´æ’åº
	OrderScore = "score" // æŒ‰åˆ†æ•°æ’åº
)

// ParamPostList è·å–å¸–å­åˆ—è¡¨çš„å‚æ•°
type ParamPostList struct {
	Page        int64  `form:"page" binding:"omitempty,min=1"`         // é¡µç (ä»1å¼€å§‹)
	Size        int64  `form:"size" binding:"omitempty,min=1,max=100"` // æ¯é¡µæ¡æ•°
	Order       string `form:"order"`                                   // æ’åºæ–¹å¼
	CommunityID int64  `form:"community_id"`                            // ç¤¾åŒºID(å¯é€‰)
}
```

**å­—æ®µè¯´æ˜:**

| å­—æ®µ | ç±»å‹ | æ ¡éªŒè§„åˆ™ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|----------|--------|------|
| `Page` | int64 | `min=1` | 1 | é¡µç ,ä»1å¼€å§‹ |
| `Size` | int64 | `min=1,max=100` | 10 | æ¯é¡µæ¡æ•°,é™åˆ¶æœ€å¤§100 |
| `Order` | string | - | "time" | æ’åºæ–¹å¼(time/score) |
| `CommunityID` | int64 | - | 0 | ç¤¾åŒºID,0è¡¨ç¤ºå…¨éƒ¨ç¤¾åŒº |

---

### 2.2 formæ ‡ç­¾è¯¦è§£

**ä¸ºä»€ä¹ˆç”¨`form`æ ‡ç­¾è€Œä¸æ˜¯`json`?**

å› ä¸ºåˆ†é¡µå‚æ•°é€šå¸¸é€šè¿‡**URLæŸ¥è¯¢å‚æ•°**ä¼ é€’:
```
GET /api/v1/posts?page=2&size=20&order=time
```

**Ginçš„å‚æ•°ç»‘å®š:**
```go
// c.ShouldBindQuery() ä¼šä» URL æŸ¥è¯¢å‚æ•°ä¸­æå–æ•°æ®
// ?page=2&size=20 â†’ ParamPostList{Page: 2, Size: 20}
```

**å¯¹æ¯”:**
```go
// form æ ‡ç­¾ â†’ ç”¨äº Query å‚æ•°
type Params struct {
	Page int `form:"page"`  // ä» ?page=1 è·å–
}
c.ShouldBindQuery(&params)

// json æ ‡ç­¾ â†’ ç”¨äº Body å‚æ•°
type Params struct {
	Page int `json:"page"`  // ä» {"page": 1} è·å–
}
c.ShouldBindJSON(&params)
```

---

### 2.3 bindingæ ¡éªŒè§„åˆ™

```go
Size int64 `form:"size" binding:"omitempty,min=1,max=100"`
```

**è§„åˆ™è¯¦è§£:**

| è§„åˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `omitempty` | å…è®¸ä¸ºç©º,ä¸ºç©ºæ—¶ä¸æ ¡éªŒ | ä¸ä¼ sizeå‚æ•°æ—¶è·³è¿‡æ ¡éªŒ |
| `min=1` | æœ€å°å€¼ä¸º1 | size=0ä¼šæŠ¥é”™ |
| `max=100` | æœ€å¤§å€¼ä¸º100 | size=101ä¼šæŠ¥é”™ |

**ä¸ºä»€ä¹ˆé™åˆ¶max=100?**
- é˜²æ­¢æ¶æ„è¯·æ±‚(å¦‚size=999999)
- ä¿æŠ¤æ•°æ®åº“æ€§èƒ½
- é™åˆ¶å•æ¬¡æŸ¥è¯¢æ•°æ®é‡

---

## 3. åŸºç¡€åˆ†é¡µå®ç°

### 3.1 Controllerå±‚

```go
// controller/post.go
package controller

import (
	"bluebell/logic"
	"bluebell/models"
	"github.com/gin-gonic/gin"
	"go.uber.org/zap"
)

// GetPostListHandler è·å–å¸–å­åˆ—è¡¨
// @Summary è·å–å¸–å­åˆ—è¡¨(æ—§ç‰ˆ)
// @Description åˆ†é¡µè·å–å¸–å­åˆ—è¡¨æ¥å£(æ—§ç‰ˆ)
// @Tags å¸–å­ç›¸å…³
// @Accept application/json
// @Produce application/json
// @Param Authorization header string true "Bearer ç”¨æˆ·ä»¤ç‰Œ"
// @Param page query string false "é¡µç "
// @Param size query string false "æ¯é¡µæ•°é‡"
// @Success 200 {object} ResponseData{data=[]models.ApiPostDetail}
// @Router /posts [get]
// @Security ApiKeyAuth
func GetPostListHandler(c *gin.Context) {
	// è·å–åˆ†é¡µå‚æ•°
	page, size := getPageInfo(c)

	// æ„é€ å‚æ•°å¯¹è±¡
	p := &models.ParamPostList{
		Page: page,
		Size: size,
	}

	// è·å–æ•°æ®
	data, err := logic.GetPostList(p)
	if err != nil {
		zap.L().Error("logic.GetPostList failed", zap.Error(err))
		ResponseError(c, CodeServerBusy)
		return
	}

	ResponseSuccess(c, data)
}
```

---

### 3.2 è·å–åˆ†é¡µå‚æ•°çš„è¾…åŠ©å‡½æ•°

```go
// controller/request.go
package controller

import (
	"strconv"
	"github.com/gin-gonic/gin"
)

const (
	CtxUserIDKey = "userID"

	defaultPage = 1   // é»˜è®¤é¡µç 
	defaultSize = 10  // é»˜è®¤æ¯é¡µæ¡æ•°
)

// getPageInfo ä» URL æŸ¥è¯¢å‚æ•°ä¸­è·å–åˆ†é¡µä¿¡æ¯
func getPageInfo(c *gin.Context) (page, size int64) {
	// è·å–pageå‚æ•°
	pageStr := c.Query("page")
	if pageStr == "" {
		page = defaultPage
	} else {
		var err error
		page, err = strconv.ParseInt(pageStr, 10, 64)
		if err != nil || page < 1 {
			page = defaultPage
		}
	}

	// è·å–sizeå‚æ•°
	sizeStr := c.Query("size")
	if sizeStr == "" {
		size = defaultSize
	} else {
		var err error
		size, err = strconv.ParseInt(sizeStr, 10, 64)
		if err != nil || size < 1 || size > 100 {
			size = defaultSize
		}
	}

	return
}
```

**ä¸ºä»€ä¹ˆè¦å•ç‹¬å°è£…?**
- ä»£ç å¤ç”¨(å¤šä¸ªæ¥å£éœ€è¦åˆ†é¡µ)
- ç»Ÿä¸€çš„é»˜è®¤å€¼å¤„ç†
- ç»Ÿä¸€çš„å‚æ•°æ ¡éªŒé€»è¾‘

---

### 3.3 Logicå±‚

```go
// logic/post.go
package logic

import (
	"bluebell/dao/mysql"
	"bluebell/models"
	"go.uber.org/zap"
)

// GetPostList è·å–å¸–å­åˆ—è¡¨
func GetPostList(p *models.ParamPostList) (data []*models.ApiPostDetail, err error) {
	// 1. ä»æ•°æ®åº“æŸ¥è¯¢å¸–å­åˆ—è¡¨ (DAO å±‚)
	posts, err := mysql.GetPostList(p.Page, p.Size)
	if err != nil {
		return nil, err
	}

	// 2. èšåˆæ•°æ®:ä¸ºæ¯ä¸ªå¸–å­å¡«å……ä½œè€…å’Œç¤¾åŒºä¿¡æ¯
	// åˆå§‹åŒ–è¿”å›çš„æ•°æ®åˆ‡ç‰‡
	data = make([]*models.ApiPostDetail, 0, len(posts))

	for _, post := range posts {
		// æ ¹æ® AuthorID æŸ¥è¯¢ä½œè€…ä¿¡æ¯ (å¤ç”¨å·²æœ‰ User DAO)
		user, err := mysql.GetUserByID(post.AuthorID)
		if err != nil {
			zap.L().Warn("mysql.GetUserByID failed, skip this post",
				zap.Int64("author_id", post.AuthorID),
				zap.Error(err))
			continue // å¦‚æœæŸ¥ä¸åˆ°ä½œè€…,è·³è¿‡æ­¤å¸–å­
		}

		// æ ¹æ® CommunityID æŸ¥è¯¢ç¤¾åŒºä¿¡æ¯ (å¤ç”¨å·²æœ‰ Community DAO)
		community, err := mysql.GetCommunityDetailByID(post.CommunityID)
		if err != nil {
			zap.L().Warn("mysql.GetCommunityDetailByID failed, skip this post",
				zap.Int64("community_id", post.CommunityID),
				zap.Error(err))
			continue
		}

		// ç»„è£… API è¯¦æƒ…æ•°æ®ç»“æ„
		postDetail := &models.ApiPostDetail{
			AuthorName:      user.Username,
			Post:            post,
			CommunityDetail: community,
		}
		data = append(data, postDetail)
	}

	return
}
```

**ä¸ºä»€ä¹ˆç”¨continueè€Œä¸æ˜¯return?**
- éƒ¨åˆ†æ•°æ®æŸ¥è¯¢å¤±è´¥ä¸å½±å“æ•´ä½“
- ä¿è¯è¿”å›å°½å¯èƒ½å¤šçš„æ•°æ®
- æ—¥å¿—ä¸­è®°å½•å¼‚å¸¸ä¿¡æ¯,æ–¹ä¾¿æ’æŸ¥

---

### 3.4 DAOå±‚

```go
// dao/mysql/post.go
package mysql

import (
	"bluebell/models"
	"database/sql"
	"go.uber.org/zap"
)

// GetPostList æŸ¥è¯¢å¸–å­åˆ—è¡¨
func GetPostList(page, size int64) (posts []*models.Post, err error) {
	sqlStr := `SELECT post_id, title, content, author_id, community_id, status, create_time
				FROM post
				ORDER BY create_time DESC
				LIMIT ?,?`

	posts = make([]*models.Post, 0, size)
	err = db.Select(&posts, sqlStr, (page-1)*size, size)

	if err == sql.ErrNoRows {
		zap.L().Warn("there is no post in db")
		err = nil // æ²¡æœ‰æ•°æ®ä¸æ˜¯é”™è¯¯
	}

	return
}
```

---

### 3.5 SQLè¯¦è§£

```sql
SELECT post_id, title, content, author_id, community_id, status, create_time
FROM post
ORDER BY create_time DESC
LIMIT ?,?
```

**LIMIT è¯­æ³•:**
```sql
LIMIT size OFFSET offset

-- ç­‰ä»·å†™æ³•
LIMIT offset, size
```

**ç¤ºä¾‹:**
```sql
-- ç¬¬1é¡µ (page=1, size=10)
LIMIT 10 OFFSET 0   -- æˆ– LIMIT 0, 10
-- æŸ¥è¯¢ç»“æœ: ç¬¬1-10æ¡

-- ç¬¬2é¡µ (page=2, size=10)
LIMIT 10 OFFSET 10  -- æˆ– LIMIT 10, 10
-- æŸ¥è¯¢ç»“æœ: ç¬¬11-20æ¡

-- ç¬¬3é¡µ (page=3, size=10)
LIMIT 10 OFFSET 20  -- æˆ– LIMIT 20, 10
-- æŸ¥è¯¢ç»“æœ: ç¬¬21-30æ¡
```

**ä¸ºä»€ä¹ˆç”¨ `(page-1)*size`?**
```
page=1 â†’ offset=(1-1)*10=0  â†’ LIMIT 10 OFFSET 0
page=2 â†’ offset=(2-1)*10=10 â†’ LIMIT 10 OFFSET 10
page=3 â†’ offset=(3-1)*10=20 â†’ LIMIT 10 OFFSET 20
```

---

## 4. æ¥å£æµ‹è¯•

### 4.1 è·å–ç¬¬1é¡µ

**è¯·æ±‚:**
```bash
curl -X GET "http://localhost:8080/api/v1/posts?page=1&size=5" \
  -H "Authorization: Bearer eyJhbGc..."
```

**å“åº”:**
```json
{
  "code": 1000,
  "msg": "success",
  "data": [
    {
      "id": "123",
      "title": "æœ€æ–°å¸–å­",
      "author_name": "å¼ ä¸‰",
      "community_id": "1",
      "communitydetail": {
        "id": "1",
        "name": "Go"
      }
    },
    // ...å…±5æ¡
  ]
}
```

---

### 4.2 è·å–ç¬¬2é¡µ

**è¯·æ±‚:**
```bash
curl -X GET "http://localhost:8080/api/v1/posts?page=2&size=5" \
  -H "Authorization: Bearer eyJhbGc..."
```

---

### 4.3 æµ‹è¯•é»˜è®¤å‚æ•°

**è¯·æ±‚(ä¸ä¼ å‚æ•°):**
```bash
curl -X GET "http://localhost:8080/api/v1/posts" \
  -H "Authorization: Bearer eyJhbGc..."
```

**æ•ˆæœ:** ä½¿ç”¨é»˜è®¤å€¼ page=1, size=10

---

### 4.4 æµ‹è¯•éæ³•å‚æ•°

**è¯·æ±‚:**
```bash
# page=0 (æ— æ•ˆ,ä¼šä½¿ç”¨é»˜è®¤å€¼1)
curl "http://localhost:8080/api/v1/posts?page=0&size=10"

# size=999 (è¶…è¿‡é™åˆ¶,ä¼šä½¿ç”¨é»˜è®¤å€¼10)
curl "http://localhost:8080/api/v1/posts?page=1&size=999"

# page=abc (éæ•°å­—,ä¼šä½¿ç”¨é»˜è®¤å€¼1)
curl "http://localhost:8080/api/v1/posts?page=abc&size=10"
```

---

## 5. LIMIT OFFSET çš„æ€§èƒ½é—®é¢˜

### 5.1 é—®é¢˜åœºæ™¯

**æŸ¥è¯¢ç¬¬1é¡µ:**
```sql
SELECT * FROM post ORDER BY create_time DESC LIMIT 10 OFFSET 0;
-- æ‰§è¡Œæ—¶é—´: 10ms
```

**æŸ¥è¯¢ç¬¬10000é¡µ:**
```sql
SELECT * FROM post ORDER BY create_time DESC LIMIT 10 OFFSET 99990;
-- æ‰§è¡Œæ—¶é—´: 2000ms (200å€æ…¢!)
```

**ä¸ºä»€ä¹ˆè¶Šåé¢è¶Šæ…¢?**

MySQLæ‰§è¡ŒLIMIT OFFSETçš„è¿‡ç¨‹:
```
1. æ‰«æå‰ 99990 + 10 = 100000 è¡Œæ•°æ®
2. æ’åºè¿™ 100000 è¡Œæ•°æ®
3. è·³è¿‡å‰ 99990 è¡Œ (ä¸¢å¼ƒ)
4. è¿”å›æœ€å 10 è¡Œ

â†’ å‰é¢çš„99990è¡Œç™½ç™½æ‰«æ,å…¨éƒ¨ä¸¢å¼ƒ!
```

---

### 5.2 æ€§èƒ½å¯¹æ¯”

**æµ‹è¯•ç¯å¢ƒ:** 100ä¸‡æ¡æ•°æ®

| é¡µç  | OFFSET | æŸ¥è¯¢æ—¶é—´ | æ‰«æè¡Œæ•° |
|------|--------|----------|----------|
| ç¬¬1é¡µ | 0 | 10ms | 10è¡Œ |
| ç¬¬100é¡µ | 990 | 15ms | 1000è¡Œ |
| ç¬¬1000é¡µ | 9990 | 50ms | 10000è¡Œ |
| ç¬¬10000é¡µ | 99990 | 500ms | 100000è¡Œ |
| ç¬¬50000é¡µ | 499990 | 5000ms | 500000è¡Œ |

**ç»“è®º:** OFFSETè¶Šå¤§,æ€§èƒ½è¶Šå·®!

---

### 5.3 ä¼˜åŒ–æ–¹æ¡ˆ1: é™åˆ¶æœ€å¤§é¡µç 

```go
const MaxPage = 1000  // æœ€å¤šæŸ¥è¯¢1000é¡µ

func getPageInfo(c *gin.Context) (page, size int64) {
	// ...
	if page > MaxPage {
		page = MaxPage  // è¶…è¿‡é™åˆ¶,è¿”å›æœ€åä¸€é¡µ
	}
	// ...
}
```

**ç”¨æˆ·ä½“éªŒ:**
- å¤§å¤šæ•°ç”¨æˆ·åªçœ‹å‰å‡ é¡µ
- å¾ˆå°‘æœ‰äººç¿»åˆ°1000é¡µä»¥å
- å¯ä»¥å¼•å¯¼ç”¨æˆ·ä½¿ç”¨æœç´¢åŠŸèƒ½

---

### 5.4 ä¼˜åŒ–æ–¹æ¡ˆ2: æ¸¸æ ‡åˆ†é¡µ (Cursor Pagination)

**åŸç†:** è®°ä½ä¸Šæ¬¡æŸ¥è¯¢çš„æœ€åä¸€æ¡ID,ä¸‹æ¬¡ä»è¿™ä¸ªIDå¼€å§‹æŸ¥

**ä¼ ç»Ÿåˆ†é¡µ:**
```sql
-- ç¬¬1é¡µ
SELECT * FROM post ORDER BY create_time DESC LIMIT 10 OFFSET 0;

-- ç¬¬2é¡µ (éœ€è¦è·³è¿‡å‰10æ¡)
SELECT * FROM post ORDER BY create_time DESC LIMIT 10 OFFSET 10;
```

**æ¸¸æ ‡åˆ†é¡µ:**
```sql
-- ç¬¬1é¡µ
SELECT * FROM post ORDER BY create_time DESC LIMIT 10;
-- è¿”å›: ID=100, ID=99, ..., ID=91

-- ç¬¬2é¡µ (ä» ID=91 å¼€å§‹,ä¸éœ€è¦OFFSET)
SELECT * FROM post WHERE create_time < '2024-01-01 10:00:00' ORDER BY create_time DESC LIMIT 10;
-- æˆ–è€…
SELECT * FROM post WHERE id < 91 ORDER BY id DESC LIMIT 10;
```

**ä¼˜ç‚¹:**
- æ— è®ºæŸ¥è¯¢å¤šè¿œ,é€Ÿåº¦éƒ½å¾ˆå¿«
- é€‚åˆæ— é™æ»šåŠ¨(Infinite Scroll)

**ç¼ºç‚¹:**
- æ— æ³•è·³è½¬åˆ°æŒ‡å®šé¡µç 
- å®ç°è¾ƒå¤æ‚
- æ•°æ®æ’å…¥æ—¶å¯èƒ½å‡ºç°é‡å¤/é—æ¼

---

### 5.5 ä¼˜åŒ–æ–¹æ¡ˆ3: ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–

**åˆ›å»ºç´¢å¼•:**
```sql
CREATE INDEX idx_create_time ON post(create_time DESC);
```

**æ•ˆæœ:**
- æ’åºç›´æ¥èµ°ç´¢å¼•,ä¸éœ€è¦æ–‡ä»¶æ’åº
- æŸ¥è¯¢é€Ÿåº¦æå‡2-5å€

**ä½†OFFSETé—®é¢˜ä¾ç„¶å­˜åœ¨!**

---

### 5.6 ä¼˜åŒ–æ–¹æ¡ˆ4: å»¶è¿Ÿå…³è” (Deferred Join)

**âŒ åŸå§‹æŸ¥è¯¢:**
```sql
SELECT * FROM post ORDER BY create_time DESC LIMIT 10 OFFSET 99990;
-- æ‰«æ10ä¸‡è¡Œ,è¿”å›10è¡Œ
```

**âœ… å»¶è¿Ÿå…³è”:**
```sql
-- 1. å…ˆåªæŸ¥ID (ç´¢å¼•è¦†ç›–,æå¿«)
SELECT post_id FROM post ORDER BY create_time DESC LIMIT 10 OFFSET 99990;

-- 2. å†æ ¹æ®IDæŸ¥è¯¦æƒ…
SELECT * FROM post WHERE post_id IN (id1, id2, ..., id10);
```

**æ”¹å†™ä¸ºJOIN:**
```sql
SELECT p.* FROM post p
INNER JOIN (
  SELECT post_id FROM post ORDER BY create_time DESC LIMIT 10 OFFSET 99990
) t ON p.post_id = t.post_id
ORDER BY p.create_time DESC;
```

**æ•ˆæœ:** é€Ÿåº¦æå‡5-10å€

---

## 6. å¤„ç†è¾¹ç•Œæƒ…å†µ

### 6.1 ç©ºæ•°æ®å¤„ç†

**é—®é¢˜:** æ•°æ®åº“ä¸­æ²¡æœ‰å¸–å­

**âŒ ä¸å¥½çš„åšæ³•:**
```go
posts, err := mysql.GetPostList(page, size)
if len(posts) == 0 {
	return nil, errors.New("no data")  // è¿”å›é”™è¯¯
}
```

**âœ… å¥½çš„åšæ³•:**
```go
posts, err := mysql.GetPostList(page, size)
// å³ä½¿len(posts)==0,ä¹Ÿä¸æŠ¥é”™
data := make([]*models.ApiPostDetail, 0, len(posts))
return data, nil  // è¿”å›ç©ºåˆ‡ç‰‡,ä¸æ˜¯nil
```

**å‰ç«¯å“åº”:**
```json
{
  "code": 1000,
  "msg": "success",
  "data": []  // ç©ºæ•°ç»„,ä¸æ˜¯null
}
```

---

### 6.2 è¶…å‡ºèŒƒå›´çš„é¡µç 

**åœºæ™¯:** æ€»å…±åªæœ‰3é¡µ,ç”¨æˆ·è¯·æ±‚ç¬¬10é¡µ

**æ–¹æ¡ˆ1: è¿”å›ç©ºæ•°æ®**
```go
// SQL: LIMIT 10 OFFSET 90
// ç»“æœ: ç©ºé›†åˆ
return []  // è¿”å›ç©ºæ•°ç»„
```

**æ–¹æ¡ˆ2: è¿”å›æœ€åä¸€é¡µ**
```go
if page > maxPage {
	page = maxPage
}
```

**æ–¹æ¡ˆ3: è¿”å›é”™è¯¯**
```go
if page > maxPage {
	return nil, errors.New("page out of range")
}
```

**æ¨è:** æ–¹æ¡ˆ1(è¿”å›ç©ºæ•°æ®),ç”¨æˆ·ä½“éªŒæœ€å¥½

---

### 6.3 è·å–æ€»æ•°

**å‰ç«¯éœ€è¦æ˜¾ç¤º:**
```
å…± 1234 æ¡è®°å½•,ç¬¬ 2/124 é¡µ
```

**å®ç°:**
```go
// DAOå±‚
func GetPostCount() (count int64, err error) {
	sqlStr := "SELECT COUNT(*) FROM post WHERE status = 1"
	err = db.Get(&count, sqlStr)
	return
}

// Logicå±‚
func GetPostList(p *models.ParamPostList) (data []*models.ApiPostDetail, total int64, err error) {
	// 1. æŸ¥è¯¢æ€»æ•°
	total, err = mysql.GetPostCount()
	if err != nil {
		return
	}

	// 2. æŸ¥è¯¢å½“å‰é¡µæ•°æ®
	posts, err := mysql.GetPostList(p.Page, p.Size)
	// ...
	return data, total, nil
}
```

**å“åº”æ ¼å¼:**
```json
{
  "code": 1000,
  "msg": "success",
  "data": {
    "list": [...],
    "total": 1234,
    "page": 2,
    "size": 10
  }
}
```

---

## 7. ä¼˜åŒ–N+1æŸ¥è¯¢é—®é¢˜

### 7.1 é—®é¢˜åˆ†æ

**å½“å‰å®ç°:**
```go
for _, post := range posts {  // å‡è®¾æœ‰10ä¸ªå¸–å­
	user, _ := mysql.GetUserByID(post.AuthorID)      // æŸ¥è¯¢1æ¬¡
	community, _ := mysql.GetCommunityDetailByID(post.CommunityID)  // æŸ¥è¯¢1æ¬¡
}
// æ€»æŸ¥è¯¢æ¬¡æ•°: 1 (æŸ¥å¸–å­) + 10 (æŸ¥ç”¨æˆ·) + 10 (æŸ¥ç¤¾åŒº) = 21 æ¬¡!
```

è¿™å°±æ˜¯ç»å…¸çš„**N+1é—®é¢˜**!

---

### 7.2 ä¼˜åŒ–æ–¹æ¡ˆ: æ‰¹é‡æŸ¥è¯¢

```go
func GetPostList(p *models.ParamPostList) ([]*models.ApiPostDetail, error) {
	// 1. æŸ¥è¯¢å¸–å­åˆ—è¡¨
	posts, err := mysql.GetPostList(p.Page, p.Size)
	if err != nil {
		return nil, err
	}

	// 2. æ”¶é›†æ‰€æœ‰ç”¨æˆ·IDå’Œç¤¾åŒºID
	userIDs := make([]int64, 0, len(posts))
	communityIDs := make([]int64, 0, len(posts))
	for _, post := range posts {
		userIDs = append(userIDs, post.AuthorID)
		communityIDs = append(communityIDs, post.CommunityID)
	}

	// 3. æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
	users, err := mysql.GetUsersByIDs(userIDs)
	if err != nil {
		return nil, err
	}
	userMap := make(map[int64]*models.User)
	for _, user := range users {
		userMap[user.UserID] = user
	}

	// 4. æ‰¹é‡æŸ¥è¯¢ç¤¾åŒºä¿¡æ¯
	communities, err := mysql.GetCommunitiesByIDs(communityIDs)
	if err != nil {
		return nil, err
	}
	communityMap := make(map[int64]*models.CommunityDetail)
	for _, community := range communities {
		communityMap[community.ID] = community
	}

	// 5. ç»„è£…æ•°æ®
	data := make([]*models.ApiPostDetail, 0, len(posts))
	for _, post := range posts {
		postDetail := &models.ApiPostDetail{
			Post:            post,
			AuthorName:      userMap[post.AuthorID].Username,
			CommunityDetail: communityMap[post.CommunityID],
		}
		data = append(data, postDetail)
	}

	return data, nil
}
```

---

### 7.3 æ‰¹é‡æŸ¥è¯¢SQL

```go
// dao/mysql/user.go
func GetUsersByIDs(ids []int64) ([]*models.User, error) {
	if len(ids) == 0 {
		return nil, nil
	}

	// æ„é€  IN æŸ¥è¯¢
	query, args, err := sqlx.In("SELECT user_id, username FROM user WHERE user_id IN (?)", ids)
	if err != nil {
		return nil, err
	}

	var users []*models.User
	err = db.Select(&users, db.Rebind(query), args...)
	return users, err
}
```

**ç”Ÿæˆçš„SQL:**
```sql
SELECT user_id, username FROM user WHERE user_id IN (1, 2, 3, 4, 5);
```

---

### 7.4 æ€§èƒ½å¯¹æ¯”

**åœºæ™¯:** æŸ¥è¯¢10ä¸ªå¸–å­

| æ–¹æ¡ˆ | SQLæŸ¥è¯¢æ¬¡æ•° | è€—æ—¶ |
|------|-------------|------|
| **N+1æŸ¥è¯¢** | 1 + 10 + 10 = 21æ¬¡ | 210ms |
| **æ‰¹é‡æŸ¥è¯¢** | 1 + 1 + 1 = 3æ¬¡ | 30ms |
| **æå‡** | å‡å°‘18æ¬¡æŸ¥è¯¢ | å¿«7å€ |

---

## 8. å‰ç«¯å¯¹æ¥

### 8.1 Vue 3 + Element Plus

```vue
<template>
  <div>
    <!-- å¸–å­åˆ—è¡¨ -->
    <div v-for="post in posts" :key="post.id">
      <h3>{{ post.title }}</h3>
      <p>{{ post.author_name }} @ {{ post.communitydetail.name }}</p>
    </div>

    <!-- åˆ†é¡µå™¨ -->
    <el-pagination
      v-model:current-page="currentPage"
      v-model:page-size="pageSize"
      :total="total"
      :page-sizes="[10, 20, 50, 100]"
      layout="total, sizes, prev, pager, next, jumper"
      @size-change="handleSizeChange"
      @current-change="handlePageChange"
    />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import axios from 'axios'

const posts = ref([])
const currentPage = ref(1)
const pageSize = ref(10)
const total = ref(0)

const fetchPosts = async () => {
  const res = await axios.get('/api/v1/posts', {
    params: {
      page: currentPage.value,
      size: pageSize.value
    }
  })
  posts.value = res.data.data.list
  total.value = res.data.data.total
}

const handlePageChange = (page) => {
  currentPage.value = page
  fetchPosts()
}

const handleSizeChange = (size) => {
  pageSize.value = size
  currentPage.value = 1  // é‡ç½®åˆ°ç¬¬1é¡µ
  fetchPosts()
}

onMounted(() => {
  fetchPosts()
})
</script>
```

---

### 8.2 React + Ant Design

```jsx
import React, { useState, useEffect } from 'react';
import { Pagination } from 'antd';
import axios from 'axios';

function PostList() {
  const [posts, setPosts] = useState([]);
  const [page, setPage] = useState(1);
  const [pageSize, setPageSize] = useState(10);
  const [total, setTotal] = useState(0);

  useEffect(() => {
    fetchPosts();
  }, [page, pageSize]);

  const fetchPosts = async () => {
    const res = await axios.get('/api/v1/posts', {
      params: { page, size: pageSize }
    });
    setPosts(res.data.data.list);
    setTotal(res.data.data.total);
  };

  return (
    <div>
      {posts.map(post => (
        <div key={post.id}>
          <h3>{post.title}</h3>
          <p>{post.author_name} @ {post.communitydetail.name}</p>
        </div>
      ))}

      <Pagination
        current={page}
        pageSize={pageSize}
        total={total}
        showSizeChanger
        showQuickJumper
        onChange={(page, pageSize) => {
          setPage(page);
          setPageSize(pageSize);
        }}
      />
    </div>
  );
}
```

---

## 9. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 9.1 è¿”å›æ•°æ®ä¸ºnullè€Œä¸æ˜¯ç©ºæ•°ç»„

**é—®é¢˜:**
```json
{
  "data": null  // â† å‰ç«¯æŠ¥é”™: Cannot read property 'length' of null
}
```

**åŸå› :** è¿”å›äº†nilåˆ‡ç‰‡

**è§£å†³:**
```go
// âŒ é”™è¯¯
var data []*models.ApiPostDetail
return data, nil  // data æ˜¯ nil

// âœ… æ­£ç¡®
data := make([]*models.ApiPostDetail, 0)
return data, nil  // data æ˜¯ç©ºåˆ‡ç‰‡,ä¸æ˜¯ nil
```

---

### 9.2 åˆ†é¡µå‚æ•°ä¸º0æˆ–è´Ÿæ•°

**é—®é¢˜:** `?page=0&size=-10`

**è§£å†³:** å‚æ•°æ ¡éªŒ
```go
if page < 1 {
	page = 1
}
if size < 1 || size > 100 {
	size = 10
}
```

---

### 9.3 OFFSETè¶…è¿‡æ€»æ•°

**åœºæ™¯:** æ€»å…±100æ¡æ•°æ®,è¯·æ±‚ç¬¬1000é¡µ

**MySQLè¡Œä¸º:** è¿”å›ç©ºé›†åˆ(ä¸æŠ¥é”™)

**å‰ç«¯å¤„ç†:**
```javascript
if (data.list.length === 0 && page > 1) {
  // å·²ç»åˆ°æœ€åä¸€é¡µäº†,ç¦ç”¨"ä¸‹ä¸€é¡µ"æŒ‰é’®
  disableNextButton();
}
```

---

### 9.4 æ’åºå­—æ®µæ³¨å…¥æ”»å‡»

**âŒ å±é™©ä»£ç :**
```go
order := c.Query("order")  // ç”¨æˆ·è¾“å…¥: "1; DROP TABLE post; --"
sqlStr := fmt.Sprintf("SELECT * FROM post ORDER BY %s", order)
```

**âœ… å®‰å…¨åšæ³•:**
```go
order := c.Query("order")
if order != "time" && order != "score" {
	order = "time"  // åªå…è®¸é¢„å®šä¹‰çš„å€¼
}
sqlStr := "SELECT * FROM post ORDER BY " + order
```

---

## 10. æœ€ä½³å®è·µ

### 10.1 è®¾ç½®åˆç†çš„é»˜è®¤å€¼

```go
const (
	DefaultPage = 1
	DefaultSize = 10
	MaxSize     = 100
)
```

---

### 10.2 ç»Ÿä¸€çš„å“åº”æ ¼å¼

```go
type PaginationData struct {
	List  interface{} `json:"list"`  // æ•°æ®åˆ—è¡¨
	Total int64       `json:"total"` // æ€»æ•°
	Page  int64       `json:"page"`  // å½“å‰é¡µ
	Size  int64       `json:"size"`  // æ¯é¡µæ¡æ•°
}
```

---

### 10.3 ç¼“å­˜çƒ­ç‚¹æ•°æ®

```go
// é¦–é¡µæ•°æ®ç¼“å­˜5åˆ†é’Ÿ
func GetPostList(p *models.ParamPostList) ([]*models.ApiPostDetail, error) {
	if p.Page == 1 {
		// å°è¯•ä»ç¼“å­˜è·å–
		cached, err := redis.GetHomePageCache()
		if err == nil {
			return cached, nil
		}
	}

	// æŸ¥è¯¢æ•°æ®åº“...
}
```

---

## 11. å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1: æ·»åŠ æ€»æ•°æŸ¥è¯¢

**ä»»åŠ¡:** ä¿®æ”¹æ¥å£,è¿”å›æ€»è®°å½•æ•°

**è¦æ±‚:**
1. è¿”å›æ ¼å¼åŒ…å«totalå­—æ®µ
2. è®¡ç®—æ€»é¡µæ•°

**å‚è€ƒç­”æ¡ˆ:**
```go
// ä¿®æ”¹å“åº”ç»“æ„
type PostListResponse struct {
	List      []*models.ApiPostDetail `json:"list"`
	Total     int64                   `json:"total"`
	Page      int64                   `json:"page"`
	Size      int64                   `json:"size"`
	TotalPage int64                   `json:"total_page"`
}

// Logicå±‚
func GetPostList(p *models.ParamPostList) (*PostListResponse, error) {
	// æŸ¥è¯¢æ€»æ•°
	total, _ := mysql.GetPostCount()

	// æŸ¥è¯¢åˆ—è¡¨
	list, _ := mysql.GetPostList(p.Page, p.Size)

	// è®¡ç®—æ€»é¡µæ•°
	totalPage := (total + p.Size - 1) / p.Size

	return &PostListResponse{
		List:      list,
		Total:     total,
		Page:      p.Page,
		Size:      p.Size,
		TotalPage: totalPage,
	}, nil
}
```

---

### ç»ƒä¹ 2: å®ç°æ¸¸æ ‡åˆ†é¡µ

**ä»»åŠ¡:** ç”¨IDä½œä¸ºæ¸¸æ ‡å®ç°åˆ†é¡µ

**å‚è€ƒç­”æ¡ˆ:**
```go
// å‚æ•°
type CursorParam struct {
	Cursor int64  `form:"cursor"` // ä¸Šæ¬¡æœ€åä¸€æ¡ID
	Size   int64  `form:"size"`
}

// DAOå±‚
func GetPostListByCursor(cursor, size int64) ([]*models.Post, error) {
	sqlStr := `SELECT * FROM post
	           WHERE post_id < ?
	           ORDER BY post_id DESC
	           LIMIT ?`
	var posts []*models.Post
	err := db.Select(&posts, sqlStr, cursor, size)
	return posts, err
}
```

---

### ç»ƒä¹ 3: å®ç°æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–

**ä»»åŠ¡:** å®ç°`GetUsersByIDs`å’Œ`GetCommunitiesByIDs`

**å‚è€ƒç­”æ¡ˆ:** è§7.3èŠ‚

---

## 12. æœ¬ç« æ€»ç»“

### 12.1 æ ¸å¿ƒçŸ¥è¯†ç‚¹

| çŸ¥è¯†ç‚¹ | è¯´æ˜ |
|--------|------|
| **åˆ†é¡µåŸç†** | LIMIT size OFFSET offset |
| **å‚æ•°è·å–** | `c.Query("page")`æˆ–`c.ShouldBindQuery()` |
| **OFFSETæ€§èƒ½é—®é¢˜** | OFFSETè¶Šå¤§è¶Šæ…¢,éœ€è¦ä¼˜åŒ– |
| **æ¸¸æ ‡åˆ†é¡µ** | ç”¨IDä½œä¸ºæ¸¸æ ‡,é¿å…OFFSET |
| **N+1é—®é¢˜** | æ‰¹é‡æŸ¥è¯¢ä»£æ›¿å¾ªç¯æŸ¥è¯¢ |
| **ç©ºæ•°æ®å¤„ç†** | è¿”å›ç©ºåˆ‡ç‰‡,ä¸æ˜¯nil |
| **å‚æ•°æ ¡éªŒ** | é»˜è®¤å€¼ã€èŒƒå›´é™åˆ¶ã€ç±»å‹æ£€æŸ¥ |

### 12.2 æ€§èƒ½ä¼˜åŒ–æ€»ç»“

| ä¼˜åŒ–æ–¹æ¡ˆ | æ•ˆæœ | é€‚ç”¨åœºæ™¯ |
|----------|------|----------|
| é™åˆ¶æœ€å¤§é¡µç  | ç®€å•æœ‰æ•ˆ | å¤§å¤šæ•°ä¸šåŠ¡ |
| æ¸¸æ ‡åˆ†é¡µ | æ€§èƒ½æœ€ä¼˜ | æ— é™æ»šåŠ¨ |
| å»¶è¿Ÿå…³è” | 5-10å€æå‡ | æ·±åº¦åˆ†é¡µ |
| æ‰¹é‡æŸ¥è¯¢ | å‡å°‘æŸ¥è¯¢æ¬¡æ•° | å…³è”æ•°æ®å¤š |
| ç´¢å¼•ä¼˜åŒ– | 2-5å€æå‡ | æ‰€æœ‰åœºæ™¯ |
| ç¼“å­˜é¦–é¡µ | æå¤§æå‡ | çƒ­ç‚¹æ•°æ® |

---

## 13. å»¶ä¼¸é˜…è¯»

- [MySQL LIMIT OFFSETä¼˜åŒ–](https://dev.mysql.com/doc/refman/8.0/en/limit-optimization.html)
- [æ¸¸æ ‡åˆ†é¡µæœ€ä½³å®è·µ](https://use-the-index-luke.com/no-offset)
- [N+1æŸ¥è¯¢é—®é¢˜](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)
- [Element Plus Pagination](https://element-plus.org/zh-CN/component/pagination.html)

---

## 14. å¸¸è§é¢è¯•é¢˜

**Q1: LIMIT OFFSETä¸ºä»€ä¹ˆè¶Šåé¢è¶Šæ…¢?**

**A:** MySQLæ‰§è¡Œ`LIMIT 10 OFFSET 99990`æ—¶,éœ€è¦æ‰«æå¹¶æ’åºå‰100000è¡Œæ•°æ®,ç„¶åä¸¢å¼ƒå‰99990è¡Œ,åªè¿”å›æœ€å10è¡Œã€‚OFFSETè¶Šå¤§,æ‰«æå’Œä¸¢å¼ƒçš„æ•°æ®è¶Šå¤š,æ€§èƒ½è¶Šå·®ã€‚

---

**Q2: å¦‚ä½•ä¼˜åŒ–æ·±åº¦åˆ†é¡µ?**

**A:**
1. **é™åˆ¶æœ€å¤§é¡µç **(å¦‚1000é¡µ)
2. **æ¸¸æ ‡åˆ†é¡µ**(ç”¨IDä½œä¸ºæ¸¸æ ‡)
3. **å»¶è¿Ÿå…³è”**(å…ˆæŸ¥IDå†JOIN)
4. **ç´¢å¼•ä¼˜åŒ–**(create_timeç´¢å¼•)
5. **ç¼“å­˜çƒ­ç‚¹æ•°æ®**(é¦–é¡µç¼“å­˜)

---

**Q3: N+1æŸ¥è¯¢é—®é¢˜æ˜¯ä»€ä¹ˆ?å¦‚ä½•è§£å†³?**

**A:**
**é—®é¢˜:** æŸ¥è¯¢Næ¡æ•°æ®,ç„¶åå¯¹æ¯æ¡æ•°æ®å†æŸ¥è¯¢å…³è”æ•°æ®,æ€»å…±N+1æ¬¡æŸ¥è¯¢ã€‚

**è§£å†³:**
1. **æ‰¹é‡æŸ¥è¯¢**: ç”¨INä¸€æ¬¡æŸ¥å‡ºæ‰€æœ‰å…³è”æ•°æ®
2. **JOIN**: ä¸€æ¬¡æŸ¥è¯¢æå®š
3. **ç¼“å­˜**: ç¼“å­˜å…³è”æ•°æ®

---

**Q4: åˆ†é¡µå‚æ•°ä¸º0æˆ–è´Ÿæ•°æ€ä¹ˆå¤„ç†?**

**A:** å‚æ•°æ ¡éªŒå¹¶ä½¿ç”¨é»˜è®¤å€¼:
```go
if page < 1 {
	page = 1
}
if size < 1 || size > 100 {
	size = 10
}
```

---

**Q5: æ¸¸æ ‡åˆ†é¡µå’ŒOFFSETåˆ†é¡µçš„åŒºåˆ«?**

**A:**
| ç»´åº¦ | OFFSETåˆ†é¡µ | æ¸¸æ ‡åˆ†é¡µ |
|------|-----------|----------|
| **æ€§èƒ½** | OFFSETè¶Šå¤§è¶Šæ…¢ | å§‹ç»ˆå¿«é€Ÿ |
| **è·³è½¬** | å¯ä»¥è·³è½¬åˆ°ä»»æ„é¡µ | ä¸èƒ½è·³è½¬ |
| **å®ç°** | ç®€å• | ç¨å¤æ‚ |
| **é€‚ç”¨** | ä¼ ç»Ÿåˆ†é¡µå™¨ | æ— é™æ»šåŠ¨ |

---

## ğŸ“– ä¸‹ä¸€ç« é¢„å‘Š

å¸–å­åˆ—è¡¨å·²ç»å®ç°äº†,ä½†æ‰€æœ‰å¸–å­æ··åœ¨ä¸€èµ·,æ— æ³•ç­›é€‰ã€‚ç”¨æˆ·éœ€è¦:**æŒ‰ç¤¾åŒºè¿‡æ»¤**ã€**æŒ‰çƒ­åº¦æ’åº**ã€**æŒ‰æ—¶é—´æ’åº**!

ä¸‹ä¸€ç« ,æˆ‘ä»¬å°†å­¦ä¹ :
- Redisåœ¨å¸–å­æ’åºä¸­çš„åº”ç”¨
- ZSetå®ç°çƒ­åº¦æ’åº
- æŒ‰ç¤¾åŒºç­›é€‰å¸–å­
- å‡çº§ç‰ˆå¸–å­åˆ—è¡¨æ¥å£

è®©å†…å®¹æ›´æœ‰åº! ğŸš€

---

**ğŸ“– ä¸‹ä¸€ç« : [ç¬¬16ç« :å¸–å­æ’åºä¸ç¤¾åŒºç­›é€‰](./16-å¸–å­æ’åºä¸ç¤¾åŒºç­›é€‰.md)**
