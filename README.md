# Bluebell ç¤¾åŒºè®ºå›

<div align="center">

![Go Version](https://img.shields.io/badge/Go-1.25%2B-blue?logo=go)
![License](https://img.shields.io/badge/license-MIT-green)
![Build Status](https://img.shields.io/badge/build-passing-brightgreen)
![Version](https://img.shields.io/badge/version-1.0.0-orange)

ä¸€ä¸ªåŸºäº Go è¯­è¨€çš„é«˜æ€§èƒ½ç¤¾åŒºè®ºå›åç«¯æœåŠ¡,é‡‡ç”¨ä¸‰å±‚æ¶æ„è®¾è®¡,æ”¯æŒç”¨æˆ·è®¤è¯ã€ç¤¾åŒºç®¡ç†ã€å¸–å­å‘å¸ƒå’ŒæŠ•ç¥¨ç³»ç»Ÿã€‚

[ç‰¹æ€§](#ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„) â€¢ [API æ–‡æ¡£](#api-æ–‡æ¡£) â€¢ [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—) â€¢ [æ•™å­¦æ–‡æ¡£](#æ•™å­¦æ–‡æ¡£)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Bluebell æ˜¯ä¸€ä¸ªç±»ä¼¼ Reddit çš„ç¤¾åŒºè®ºå›ç³»ç»Ÿ,ç”¨æˆ·å¯ä»¥åœ¨ä¸åŒä¸»é¢˜çš„ç¤¾åŒºä¸‹å‘å¸ƒå¸–å­ã€å‚ä¸è®¨è®ºå¹¶æŠ•ç¥¨ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„ Go Web å¼€å‘æŠ€æœ¯æ ˆ,é€‚åˆä½œä¸ºå­¦ä¹  Go è¯­è¨€ Web å¼€å‘çš„å®æˆ˜é¡¹ç›®ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ” **ç”¨æˆ·ç³»ç»Ÿ**: æ³¨å†Œã€ç™»å½•ã€JWT è®¤è¯ã€Token åˆ·æ–°ã€å•ç‚¹ç™»å½•
- ğŸ˜ï¸ **ç¤¾åŒºç®¡ç†**: ç¤¾åŒºåˆ—è¡¨ã€ç¤¾åŒºè¯¦æƒ…ã€ç¤¾åŒºåˆ†ç±»
- ğŸ“ **å¸–å­ç³»ç»Ÿ**: å‘å¸ƒå¸–å­ã€æŸ¥çœ‹è¯¦æƒ…ã€åˆ†é¡µåˆ—è¡¨ã€ç¤¾åŒºç­›é€‰
- ğŸ‘ **æŠ•ç¥¨æœºåˆ¶**: Reddit ç®—æ³•ã€èµæˆ/åå¯¹ç¥¨ã€é˜²é‡å¤æŠ•ç¥¨ã€7å¤©æŠ•ç¥¨æœŸé™
- ğŸ”¥ **æ’åºç­–ç•¥**: æŒ‰æ—¶é—´æ’åºã€æŒ‰çƒ­åº¦æ’åº
- ğŸ“Š **é«˜æ€§èƒ½**: Redis ç¼“å­˜ã€Pipeline æ‰¹é‡æŸ¥è¯¢ã€N+1 é—®é¢˜ä¼˜åŒ–

---

## âœ¨ ç‰¹æ€§

### æŠ€æœ¯æ¶æ„

- **Web æ¡†æ¶**: [Gin](https://github.com/gin-gonic/gin) - é«˜æ€§èƒ½ HTTP Web æ¡†æ¶
- **æ•°æ®åº“**: MySQL + [sqlx](https://github.com/jmoiron/sqlx) - å…³ç³»å‹æ•°æ®å­˜å‚¨
- **ç¼“å­˜**: [Redis](https://redis.io) + [go-redis](https://github.com/redis/go-redis) - é«˜æ€§èƒ½ç¼“å­˜å’Œæ’åº
- **æ—¥å¿—**: [Zap](https://github.com/uber-go/zap) + [Lumberjack](https://github.com/natefinch/lumberjack) - ç»“æ„åŒ–æ—¥å¿—å’Œæ—¥å¿—è½®è½¬
- **é…ç½®**: [Viper](https://github.com/spf13/viper) - é…ç½®ç®¡ç†
- **è®¤è¯**: JWT (golang-jwt/jwt) - æ— çŠ¶æ€è®¤è¯
- **ID ç”Ÿæˆ**: [Snowflake](https://github.com/bwmarrin/snowflake) - åˆ†å¸ƒå¼å”¯ä¸€ ID
- **å‚æ•°æ ¡éªŒ**: [validator](https://github.com/go-playground/validator) - è¯·æ±‚å‚æ•°æ ¡éªŒ
- **æ–‡æ¡£**: [Swagger](https://swagger.io) - è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£

### å·¥ç¨‹ç‰¹æ€§

- âœ… **ä¸‰å±‚æ¶æ„** (Controller-Logic-DAO) - èŒè´£æ¸…æ™°,æ˜“äºç»´æŠ¤
- âœ… **RESTful API** - ç¬¦åˆ REST è§„èŒƒçš„æ¥å£è®¾è®¡
- âœ… **ä¼˜é›…å…³æœº** - æ”¯æŒå¹³æ»‘å…³é—­,ä¸ä¸¢å¤±è¯·æ±‚
- âœ… **çƒ­é‡è½½å¼€å‘** - ä½¿ç”¨ Air å®ç°ä»£ç å˜æ›´è‡ªåŠ¨é‡å¯
- âœ… **ç»“æ„åŒ–æ—¥å¿—** - Zap é«˜æ€§èƒ½æ—¥å¿—,æ—¥å¿—åˆ†çº§å’Œè½®è½¬
- âœ… **ç»Ÿä¸€é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯ç å’Œå“åº”æ ¼å¼
- âœ… **ä¸­é—´ä»¶æ”¯æŒ** - JWT è®¤è¯ã€è·¨åŸŸã€æ—¥å¿—ã€é™æµç­‰
- âœ… **è‡ªåŠ¨åŒ–æ„å»º** - Makefile ç®€åŒ–ç¼–è¯‘å’Œéƒ¨ç½²
- âœ… **å®Œæ•´æ–‡æ¡£** - Swagger API æ–‡æ¡£ + 18 ç« æ•™å­¦æ–‡æ¡£

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚:

| ä¾èµ– | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|---------|------|
| **Go** | 1.19+ | [å®˜æ–¹ä¸‹è½½](https://golang.org/dl/) |
| **MySQL** | 5.7+ / 8.0+ | å…³ç³»å‹æ•°æ®åº“ |
| **Redis** | 5.0+ | ç¼“å­˜å’Œæ’åº |
| **Git** | ä»»æ„ç‰ˆæœ¬ | ç‰ˆæœ¬æ§åˆ¶ |

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd bluebell
```

#### 2. å®‰è£…ä¾èµ–

```bash
go mod download
```

#### 3. é…ç½®æ•°æ®åº“

**å¯åŠ¨ MySQL:**

```bash
# macOS (Homebrew)
brew services start mysql

# Linux (systemd)
sudo systemctl start mysql

# Windows
# é€šè¿‡æœåŠ¡ç®¡ç†å™¨å¯åŠ¨ MySQL æœåŠ¡
```

**åˆ›å»ºæ•°æ®åº“:**

```sql
CREATE DATABASE bluebell DEFAULT CHARSET utf8mb4 COLLATE utf8mb4_general_ci;
```

**å¯¼å…¥è¡¨ç»“æ„:**

> âš ï¸ **æ³¨æ„**: é¡¹ç›®ä¸­æš‚æ—  SQL å»ºè¡¨è„šæœ¬,è¯·å‚è€ƒ `æ•™å­¦æ–‡æ¡£/` ä¸­çš„è¡¨ç»“æ„è¯´æ˜æ‰‹åŠ¨åˆ›å»ºè¡¨,æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…è·å–å®Œæ•´çš„ SQL æ–‡ä»¶ã€‚

ä¸»è¦è¡¨ç»“æ„åŒ…æ‹¬:
- `user` - ç”¨æˆ·è¡¨
- `community` - ç¤¾åŒºè¡¨
- `post` - å¸–å­è¡¨

#### 4. é…ç½® Redis

**å¯åŠ¨ Redis:**

```bash
# macOS (Homebrew)
brew services start redis

# Linux (systemd)
sudo systemctl start redis

# Docker
docker run -d -p 6379:6379 redis:latest
```

#### 5. ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘ `config.yaml`:

```yaml
app:
  name: "bluebell"
  port: 8080
  mode: "dev"  # dev / release
  version: "1.0.0"

mysql:
  host: "127.0.0.1"
  port: 3306
  user: "root"
  password: "your_password"  # âš ï¸ ä¿®æ”¹ä¸ºä½ çš„ MySQL å¯†ç 
  db_name: "bluebell"
  max_open_conns: 100
  max_idle_conns: 10

redis:
  host: "127.0.0.1"
  port: 6379
  password: ""  # å¦‚æœè®¾ç½®äº†å¯†ç ,è¯·å¡«å†™
  db_name: 0
  pool_size: 100

log:
  level: "debug"  # debug / info / warn / error
  file_name: "bluebell.log"
  max_size: 100  # MB
  max_backups: 7
  max_age: 30  # days

snowflake:
  start_time: "2024-01-01"
  machine_id: 1
```

#### 6. è¿è¡Œé¡¹ç›®

**æ–¹å¼ 1: ç›´æ¥è¿è¡Œ**

```bash
go run main.go
```

**æ–¹å¼ 2: ä½¿ç”¨ Makefile**

```bash
make run
```

**æ–¹å¼ 3: ä½¿ç”¨ Air çƒ­é‡è½½ (æ¨èå¼€å‘ç¯å¢ƒ)**

```bash
# å®‰è£… Air
go install github.com/air-verse/air@latest

# å¯åŠ¨çƒ­é‡è½½
air
```

**æ–¹å¼ 4: ç¼–è¯‘åè¿è¡Œ**

```bash
# ç¼–è¯‘
make build

# è¿è¡Œ
./bluebell
```

#### 7. éªŒè¯è¿è¡Œ

**è®¿é—® Swagger æ–‡æ¡£:**

æ‰“å¼€æµè§ˆå™¨è®¿é—®: [http://127.0.0.1:8080/swagger/index.html](http://127.0.0.1:8080/swagger/index.html)

**æµ‹è¯• API:**

```bash
# å¥åº·æ£€æŸ¥ (å¦‚æœæœ‰)
curl http://127.0.0.1:8080/ping

# æ³¨å†Œç”¨æˆ·
curl -X POST http://127.0.0.1:8080/api/v1/signup \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "123456",
    "re_password": "123456"
  }'
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
bluebell/
â”œâ”€â”€ config.yaml              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main.go                  # ç¨‹åºå…¥å£
â”œâ”€â”€ Makefile                 # è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬
â”œâ”€â”€ .air.conf                # Air çƒ­é‡è½½é…ç½®
â”œâ”€â”€ go.mod / go.sum          # Go æ¨¡å—ä¾èµ–
â”‚
â”œâ”€â”€ controller/              # æ§åˆ¶å™¨å±‚ (å¤„ç† HTTP è¯·æ±‚)
â”‚   â”œâ”€â”€ code.go              # é”™è¯¯ç å®šä¹‰
â”‚   â”œâ”€â”€ community.go         # ç¤¾åŒºç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ post.go              # å¸–å­ç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ user.go              # ç”¨æˆ·ç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ vote.go              # æŠ•ç¥¨ç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ validator.go         # å‚æ•°æ ¡éªŒå™¨
â”‚   â””â”€â”€ request.go           # è¯·æ±‚è¾…åŠ©å‡½æ•°
â”‚
â”œâ”€â”€ logic/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ community.go         # ç¤¾åŒºä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ post.go              # å¸–å­ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ user.go              # ç”¨æˆ·ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ vote.go              # æŠ•ç¥¨ä¸šåŠ¡é€»è¾‘
â”‚
â”œâ”€â”€ dao/                     # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ mysql/               # MySQL æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ mysql.go         # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ user.go          # ç”¨æˆ·è¡¨æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ community.go     # ç¤¾åŒºè¡¨æ“ä½œ
â”‚   â”‚   â””â”€â”€ post.go          # å¸–å­è¡¨æ“ä½œ
â”‚   â””â”€â”€ redis/               # Redis ç¼“å­˜æ“ä½œ
â”‚       â”œâ”€â”€ redis.go         # Redis åˆå§‹åŒ–
â”‚       â”œâ”€â”€ keys.go          # Redis Key å‘½åè§„èŒƒ
â”‚       â”œâ”€â”€ vote.go          # æŠ•ç¥¨æ•°æ®ç¼“å­˜
â”‚       â””â”€â”€ post.go          # å¸–å­æ’åºç¼“å­˜
â”‚
â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ user.go              # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ community.go         # ç¤¾åŒºæ¨¡å‹
â”‚   â”œâ”€â”€ post.go              # å¸–å­æ¨¡å‹
â”‚   â””â”€â”€ params.go            # è¯·æ±‚/å“åº”å‚æ•°
â”‚
â”œâ”€â”€ middlewares/             # ä¸­é—´ä»¶
â”‚   â””â”€â”€ auth.go              # JWT è®¤è¯ä¸­é—´ä»¶
â”‚
â”œâ”€â”€ routers/                 # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ routers.go           # è·¯ç”±æ³¨å†Œ
â”‚
â”œâ”€â”€ pkg/                     # å…¬å…±å·¥å…·åŒ…
â”‚   â”œâ”€â”€ jwt/                 # JWT Token å·¥å…·
â”‚   â”œâ”€â”€ snowflake/           # Snowflake ID ç”Ÿæˆ
â”‚   â””â”€â”€ errno/               # è‡ªå®šä¹‰é”™è¯¯ç±»å‹
â”‚
â”œâ”€â”€ logger/                  # æ—¥å¿—åˆå§‹åŒ–
â”‚   â””â”€â”€ logger.go
â”‚
â”œâ”€â”€ settings/                # é…ç½®åŠ è½½
â”‚   â””â”€â”€ settings.go
â”‚
â”œâ”€â”€ docs/                    # Swagger ç”Ÿæˆçš„æ–‡æ¡£
â”‚   â”œâ”€â”€ docs.go
â”‚   â”œâ”€â”€ swagger.json
â”‚   â””â”€â”€ swagger.yaml
â”‚
â””â”€â”€ æ•™å­¦æ–‡æ¡£/                 # å®Œæ•´çš„æ•™å­¦æ–‡æ¡£ (18ç« )
    â”œâ”€â”€ README.md
    â”œâ”€â”€ 01-ç”¨æˆ·è¡¨è®¾è®¡ä¸æ•°æ®å»ºæ¨¡.md
    â”œâ”€â”€ ...
    â””â”€â”€ 18-æŒ‰ç¤¾åŒºç­›é€‰å¸–å­å®ç°.md
```

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### ä¸‰å±‚æ¶æ„è®¾è®¡

Bluebell é‡‡ç”¨ç»å…¸çš„ **Controller-Logic-DAO** ä¸‰å±‚æ¶æ„:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  HTTP Client                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP Request
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Controller Layer (æ§åˆ¶å™¨å±‚)          â”‚
â”‚  â€¢ å‚æ•°è§£æä¸æ ¡éªŒ (ShouldBindJSON)                â”‚
â”‚  â€¢ è°ƒç”¨ Logic å±‚                                 â”‚
â”‚  â€¢ å°è£…å“åº” (ResponseSuccess/ResponseError)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Logic Layer (ä¸šåŠ¡é€»è¾‘å±‚)            â”‚
â”‚  â€¢ ä¸šåŠ¡è§„åˆ™å®ç°                                   â”‚
â”‚  â€¢ æ•°æ®èšåˆå’Œæ‹¼æ¥                                 â”‚
â”‚  â€¢ ç¼“å­˜ç­–ç•¥                                      â”‚
â”‚  â€¢ è°ƒç”¨ DAO å±‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                DAO Layer (æ•°æ®è®¿é—®å±‚)             â”‚
â”‚  â€¢ MySQL æ•°æ®åº“æ“ä½œ (sqlx)                        â”‚
â”‚  â€¢ Redis ç¼“å­˜æ“ä½œ (go-redis)                      â”‚
â”‚  â€¢ SQL æŸ¥è¯¢å°è£…                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â†“                     â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  MySQL   â”‚          â”‚  Redis   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£åŸåˆ™ (SRP)**: æ¯å±‚åªå…³æ³¨è‡ªå·±çš„èŒè´£
- **ä¾èµ–å€’ç½®åŸåˆ™ (DIP)**: ä¸Šå±‚ä¾èµ–ä¸‹å±‚çš„æŠ½è±¡è€Œéå®ç°
- **å¼€é—­åŸåˆ™ (OCP)**: å¯¹æ‰©å±•å¼€æ”¾,å¯¹ä¿®æ”¹å…³é—­

**ç¤ºä¾‹æµç¨‹ - åˆ›å»ºå¸–å­:**

1. **Controller**: è§£æ JSON å‚æ•°,ä» JWT ä¸­è·å– `userID`,æ ¡éªŒå‚æ•°åˆæ³•æ€§
2. **Logic**: ç”Ÿæˆ Snowflake ID,æ„é€  Post å¯¹è±¡,åè°ƒ MySQL å’Œ Redis æ“ä½œ
3. **DAO (MySQL)**: æ‰§è¡Œ `INSERT` è¯­å¥,å°†å¸–å­å­˜å…¥æ•°æ®åº“
4. **DAO (Redis)**: å°†å¸–å­ ID åŠ å…¥æ—¶é—´æ’åº ZSet å’Œåˆ†æ•°æ’åº ZSet

---

## ğŸ“¡ API æ–‡æ¡£

### Swagger æ–‡æ¡£

å¯åŠ¨é¡¹ç›®åè®¿é—®: **[http://127.0.0.1:8080/swagger/index.html](http://127.0.0.1:8080/swagger/index.html)**

### æ›´æ–° Swagger æ–‡æ¡£

ä¿®æ”¹ä»£ç å,éœ€è¦é‡æ–°ç”Ÿæˆ Swagger æ–‡æ¡£:

```bash
# å®‰è£… swag
go install github.com/swaggo/swag/cmd/swag@latest

# ç”Ÿæˆæ–‡æ¡£
swag init

# é‡å¯æœåŠ¡æŸ¥çœ‹æ›´æ–°
```

### ä¸»è¦ API æ¥å£

#### ğŸ” ç”¨æˆ·è®¤è¯

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|------|---------|
| ç”¨æˆ·æ³¨å†Œ | POST | `/api/v1/signup` | åˆ›å»ºæ–°ç”¨æˆ· | âŒ |
| ç”¨æˆ·ç™»å½• | POST | `/api/v1/login` | è·å– Access Token | âŒ |
| åˆ·æ–° Token | POST | `/api/v1/refresh_token` | åˆ·æ–° Access Token | âŒ |

#### ğŸ˜ï¸ ç¤¾åŒºç®¡ç†

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|------|---------|
| è·å–ç¤¾åŒºåˆ—è¡¨ | GET | `/api/v1/community` | è·å–æ‰€æœ‰ç¤¾åŒº | âœ… |
| è·å–ç¤¾åŒºè¯¦æƒ… | GET | `/api/v1/community/:id` | è·å–æŒ‡å®šç¤¾åŒºè¯¦æƒ… | âœ… |

#### ğŸ“ å¸–å­ç®¡ç†

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|------|---------|
| åˆ›å»ºå¸–å­ | POST | `/api/v1/post` | å‘å¸ƒæ–°å¸–å­ | âœ… |
| è·å–å¸–å­è¯¦æƒ… | GET | `/api/v1/post/:id` | è·å–æŒ‡å®šå¸–å­è¯¦æƒ… | âœ… |
| è·å–å¸–å­åˆ—è¡¨ | GET | `/api/v1/posts2` | åˆ†é¡µè·å–å¸–å­åˆ—è¡¨(æ”¯æŒæ’åºå’Œç¤¾åŒºç­›é€‰) | âœ… |

#### ğŸ‘ æŠ•ç¥¨åŠŸèƒ½

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|------|---------|
| å¸–å­æŠ•ç¥¨ | POST | `/api/v1/vote` | å¯¹å¸–å­æŠ•èµæˆç¥¨/åå¯¹ç¥¨/å–æ¶ˆæŠ•ç¥¨ | âœ… |

### ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£éƒ½è¿”å›ç»Ÿä¸€çš„ JSON æ ¼å¼:

**æˆåŠŸå“åº”:**
```json
{
  "code": 1000,
  "msg": "success",
  "data": { /* å®é™…æ•°æ® */ }
}
```

**é”™è¯¯å“åº”:**
```json
{
  "code": 1007,
  "msg": "è¯·æ±‚å‚æ•°é”™è¯¯",
  "data": null
}
```

**å¸¸è§é”™è¯¯ç :**

| é”™è¯¯ç  | è¯´æ˜ |
|-------|------|
| 1000 | æˆåŠŸ |
| 1001 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 1002 | ç”¨æˆ·åå·²å­˜åœ¨ |
| 1003 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 1004 | å¯†ç é”™è¯¯ |
| 1005 | æ— æ•ˆçš„ Token |
| 1006 | Token å·²è¿‡æœŸ |
| 1007 | éœ€è¦ç™»å½• |
| 1008 | æœåŠ¡ç¹å¿™ |

---

## ğŸ”§ å¼€å‘æŒ‡å—

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘ç¯å¢ƒè¿è¡Œ (çƒ­é‡è½½)
air

# æ ¼å¼åŒ–ä»£ç 
make gotool

# ç¼–è¯‘é¡¹ç›® (Linux é™æ€ç¼–è¯‘)
make build

# æœ¬åœ°è¿è¡Œ
make run

# æ¸…ç†ç¼–è¯‘äº§ç‰©
make clean

# ç”Ÿæˆ Swagger æ–‡æ¡£
swag init

# æŸ¥çœ‹å¸®åŠ©
make help
```

### å¼€å‘æµç¨‹

1. **åˆ›å»ºæ–°åŠŸèƒ½åˆ†æ”¯**
```bash
git checkout -b feature/your-feature
```

2. **ç¼–å†™ä»£ç ** (éµå¾ªä¸‰å±‚æ¶æ„)
   - Controller: å®šä¹‰ Handler å‡½æ•°,æ·»åŠ  Swagger æ³¨é‡Š
   - Logic: å®ç°ä¸šåŠ¡é€»è¾‘
   - DAO: å°è£…æ•°æ®åº“æ“ä½œ

3. **æ›´æ–° Swagger æ–‡æ¡£**
```bash
swag init
```

4. **æµ‹è¯•æ¥å£**
   - ä½¿ç”¨ Swagger UI æˆ– curl/Postman æµ‹è¯•

5. **æäº¤ä»£ç **
```bash
git add .
git commit -m "feat: your feature description"
git push origin feature/your-feature
```

### ç¼–ç è§„èŒƒ

- **å‘½åè§„èŒƒ**:
  - æ–‡ä»¶å: å°å†™å­—æ¯ + ä¸‹åˆ’çº¿ (`user_controller.go`)
  - å‡½æ•°å: å¤§é©¼å³° (`CreatePost`) æˆ– å°é©¼å³° (`getUserID`)
  - å¸¸é‡: å¤§å†™å­—æ¯ + ä¸‹åˆ’çº¿ (`MAX_PAGE_SIZE`)

- **æ³¨é‡Šè§„èŒƒ**:
  - å…¬å¼€å‡½æ•°å¿…é¡»æœ‰æ³¨é‡Š
  - å¤æ‚é€»è¾‘å¿…é¡»è§£é‡ŠåŸå› 
  - Swagger æ³¨é‡Šå¿…é¡»å®Œæ•´

- **é”™è¯¯å¤„ç†**:
  - ä½¿ç”¨ `zap.L().Error()` è®°å½•é”™è¯¯
  - ä¸æš´éœ²å†…éƒ¨é”™è¯¯ç»™ç”¨æˆ·
  - ç»Ÿä¸€ä½¿ç”¨ `ResponseError()` è¿”å›é”™è¯¯

- **æ—¥å¿—è§„èŒƒ**:
  - Debug: è°ƒè¯•ä¿¡æ¯
  - Info: ä¸€èˆ¬ä¿¡æ¯
  - Warn: è­¦å‘Šä¿¡æ¯
  - Error: é”™è¯¯ä¿¡æ¯ (å¿…é¡»åŒ…å«ä¸Šä¸‹æ–‡)

### æ·»åŠ æ–°æ¥å£æ­¥éª¤

**ç¤ºä¾‹: æ·»åŠ "åˆ é™¤å¸–å­"åŠŸèƒ½**

1. **å®šä¹‰å‚æ•°ç»“æ„ (`models/params.go`)**
```go
type ParamDeletePost struct {
    PostID int64 `json:"post_id" binding:"required"`
}
```

2. **å®ç° DAO å±‚ (`dao/mysql/post.go`)**
```go
func DeletePost(postID int64) error {
    sqlStr := `UPDATE post SET status = 2 WHERE post_id = ?`
    _, err := db.Exec(sqlStr, postID)
    return err
}
```

3. **å®ç° Logic å±‚ (`logic/post.go`)**
```go
func DeletePost(userID, postID int64) error {
    // 1. æŸ¥è¯¢å¸–å­æ˜¯å¦å­˜åœ¨
    post, err := mysql.GetPostByID(postID)
    if err != nil {
        return err
    }

    // 2. æƒé™æ ¡éªŒ
    if post.AuthorID != userID {
        return errors.New("æ— æƒåˆ é™¤ä»–äººå¸–å­")
    }

    // 3. è½¯åˆ é™¤
    return mysql.DeletePost(postID)
}
```

4. **å®ç° Controller å±‚ (`controller/post.go`)**
```go
// DeletePostHandler åˆ é™¤å¸–å­
// @Summary åˆ é™¤å¸–å­
// @Description è½¯åˆ é™¤æŒ‡å®šå¸–å­
// @Tags å¸–å­ç›¸å…³
// @Accept application/json
// @Produce application/json
// @Param Authorization header string true "Bearer ç”¨æˆ·ä»¤ç‰Œ"
// @Param object body models.ParamDeletePost true "åˆ é™¤å¸–å­å‚æ•°"
// @Success 200 {object} ResponseData
// @Router /post [delete]
func DeletePostHandler(c *gin.Context) {
    // 1. è·å–ç”¨æˆ·ID
    userID, _ := c.Get(CtxUserIDKey)

    // 2. å‚æ•°æ ¡éªŒ
    p := new(models.ParamDeletePost)
    if err := c.ShouldBindJSON(p); err != nil {
        ResponseError(c, CodeInvalidParam)
        return
    }

    // 3. è°ƒç”¨Logicå±‚
    if err := logic.DeletePost(userID.(int64), p.PostID); err != nil {
        ResponseError(c, CodeServerBusy)
        return
    }

    ResponseSuccess(c, nil)
}
```

5. **æ³¨å†Œè·¯ç”± (`routers/routers.go`)**
```go
authGroup.DELETE("/post", controller.DeletePostHandler)
```

6. **æ›´æ–° Swagger æ–‡æ¡£**
```bash
swag init
```

---

## ğŸ“š æ•™å­¦æ–‡æ¡£

é¡¹ç›®åŒ…å«å®Œæ•´çš„ **18 ç« æ•™å­¦æ–‡æ¡£**,æ¶µç›–ä»é›¶å¼€å§‹æ„å»ºæ•´ä¸ªé¡¹ç›®çš„å…¨è¿‡ç¨‹ã€‚

### æ–‡æ¡£ç›®å½•

#### ğŸ“˜ ç¬¬ä¸€éƒ¨åˆ†:åŸºç¡€ç¯‡ - ç”¨æˆ·è®¤è¯ä¸JWT (1-12ç« )

| ç« èŠ‚ | æ ‡é¢˜ | æ ¸å¿ƒçŸ¥è¯†ç‚¹ |
|------|------|-----------|
| 01 | ç”¨æˆ·è¡¨è®¾è®¡ä¸æ•°æ®å»ºæ¨¡ | MySQLè¡¨è®¾è®¡ã€å­—æ®µç±»å‹ã€ç´¢å¼•ä¼˜åŒ– |
| 02 | Snowflakeç®—æ³•ç”Ÿæˆåˆ†å¸ƒå¼ID | åˆ†å¸ƒå¼IDã€é›ªèŠ±ç®—æ³•åŸç† |
| 03 | ç”¨æˆ·æ³¨å†Œä¸šåŠ¡æµç¨‹è®¾è®¡ | ä¸‰å±‚æ¶æ„(CLD)ã€ä¸šåŠ¡æµç¨‹ |
| 04 | è¯·æ±‚å‚æ•°ç»‘å®šä¸æ ¡éªŒ | ShouldBindJSONã€validatoræ ‡ç­¾ |
| 05 | ä¼˜é›…çš„å‚æ•°æ ¡éªŒä¸é”™è¯¯ç¿»è¯‘ | è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™ã€ä¸­æ–‡åŒ– |
| 06 | ç”¨æˆ·å¯†ç åŠ å¯†ä¸æ•°æ®æŒä¹…åŒ– | bcryptã€sqlxæ•°æ®æ’å…¥ |
| 07 | Zapæ—¥å¿—ç³»ç»Ÿé›†æˆä¸ç¯å¢ƒåˆ†ç¦» | ç»“æ„åŒ–æ—¥å¿—ã€Lumberjackè½®è½¬ |
| 08 | JWTè®¤è¯ä¸ç™»å½•åŠŸèƒ½å®ç° | JWTåŸç†ã€Tokenç”Ÿæˆ |
| 09 | Refresh_Token_æœ€ä½³å®è·µ | Tokenåˆ·æ–°ã€å®‰å…¨æ€§æå‡ |
| 10 | å•ç‚¹ç™»å½•ä¸äº’è¸¢æ¨¡å¼ | å•è®¾å¤‡ç™»å½•ã€Rediså­˜å‚¨Token |
| 11 | é›†æˆSwaggerè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ | Swaggoé›†æˆã€æ³¨è§£ç¼–å†™ |
| 12 | é«˜æ•ˆå¼€å‘å·¥å…·Makefileä¸Air | Makefileç¼–è¯‘ã€Airçƒ­é‡è½½ |

#### ğŸ“— ç¬¬äºŒéƒ¨åˆ†:è¿›é˜¶ç¯‡ - ç¤¾åŒºä¸å¸–å­åŠŸèƒ½ (13-18ç« )

| ç« èŠ‚ | æ ‡é¢˜ | æ ¸å¿ƒçŸ¥è¯†ç‚¹ |
|------|------|-----------|
| 13 | ç¤¾åŒºç®¡ç†åŠŸèƒ½å®ç° | RESTful APIè®¾è®¡ã€ç¤¾åŒºåˆ—è¡¨/è¯¦æƒ… |
| 14 | å¸–å­å‘å¸ƒåŠŸèƒ½å®ç° | åˆ›å»ºå¸–å­ã€å¤šè¡¨å…³è”æŸ¥è¯¢ |
| 15 | å¸–å­åˆ—è¡¨åˆ†é¡µå®ç° | åˆ†é¡µåŸç†ã€LIMIT OFFSETã€N+1ä¼˜åŒ– |
| 16 | å¸–å­æŠ•ç¥¨åŠŸèƒ½æ·±åº¦è§£æ | Redditç®—æ³•ã€æŠ•ç¥¨è§„åˆ™ã€çŠ¶æ€æœº |
| 17 | Redisåœ¨å¸–å­æ’åºä¸­çš„åº”ç”¨ | ZSetã€PipelineåŸå­æ€§ã€æ‰¹é‡æŸ¥è¯¢ |
| 18 | æŒ‰ç¤¾åŒºç­›é€‰å¸–å­å®ç° | ç»Ÿä¸€æ¥å£è®¾è®¡ã€è°ƒåº¦å™¨æ¨¡å¼ |

### å¦‚ä½•ä½¿ç”¨æ•™å­¦æ–‡æ¡£

1. **æŒ‰é¡ºåºå­¦ä¹ **: ä»ç¬¬ 1 ç« å¼€å§‹,å¾ªåºæ¸è¿›
2. **åŠ¨æ‰‹å®è·µ**: æ¯ç« éƒ½è¦äº²è‡ªç¼–å†™ä»£ç 
3. **ç†è§£åŸç†**: ä¸è¦åªè®°ä»£ç ,è¦ç†è§£è®¾è®¡å†³ç­–
4. **å®Œæˆç»ƒä¹ **: æ¯ç« æœ«å°¾çš„ç»ƒä¹ é¢˜å¸®åŠ©å·©å›ºçŸ¥è¯†

**æ–‡æ¡£ä½ç½®**: `æ•™å­¦æ–‡æ¡£/README.md`

---

## ğŸ¯ æ ¸å¿ƒæŠ€æœ¯äº®ç‚¹

### 1. JWT è®¤è¯æœºåˆ¶

- **Access Token**: çŸ­æœŸæœ‰æ•ˆ (2å°æ—¶),ç”¨äº API è®¤è¯
- **Refresh Token**: é•¿æœŸæœ‰æ•ˆ (30å¤©),ç”¨äºåˆ·æ–° Access Token
- **å•ç‚¹ç™»å½•**: Redis å­˜å‚¨ Token,å®ç°è®¾å¤‡äº’è¸¢

### 2. Reddit æŠ•ç¥¨ç®—æ³•

```
åˆ†æ•° = å¸–å­åˆ›å»ºæ—¶é—´æˆ³ + (èµæˆç¥¨æ•° - åå¯¹ç¥¨æ•°) Ã— 432
```

- **æ—¶é—´å› ç´ **: æ–°å¸–å­å¤©ç„¶è·å¾—æ›´é«˜åˆå§‹åˆ†æ•°
- **æŠ•ç¥¨å› ç´ **: æ¯ä¸ªèµæˆç¥¨å¢åŠ  432 åˆ† (çº¦ 1 ç¥¨ = 12 å°æ—¶æ—¶é—´ä¼˜åŠ¿)
- **é˜²ä½œå¼Š**: 7å¤©æŠ•ç¥¨æœŸé™,è¶…æ—¶æ— æ³•æŠ•ç¥¨

### 3. Redis é«˜æ€§èƒ½ä¼˜åŒ–

- **ZSet æ’åº**: ä½¿ç”¨ `bluebell:post:score` å’Œ `bluebell:post:time` ä¸¤ä¸ªæœ‰åºé›†åˆ
- **Pipeline æ‰¹é‡æŸ¥è¯¢**: å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°
- **æŠ•ç¥¨è®°å½•**: `bluebell:post:voted:{postID}` å­˜å‚¨æ¯ä¸ªç”¨æˆ·çš„æŠ•ç¥¨æ–¹å‘

### 4. N+1 é—®é¢˜ä¼˜åŒ–

**é—®é¢˜**: æŸ¥è¯¢ 100 ä¸ªå¸–å­,éœ€è¦ 1 + 100 + 100 = 201 æ¬¡æ•°æ®åº“æŸ¥è¯¢

**ä¼˜åŒ–**: ä½¿ç”¨ `sqlx.In()` æ‰¹é‡æŸ¥è¯¢,å‡å°‘åˆ° 3 æ¬¡

```go
// âŒ ä½æ•ˆ: N+1 é—®é¢˜
for _, post := range posts {
    user := GetUserByID(post.AuthorID)     // N æ¬¡
    community := GetCommunityByID(post.CommunityID)  // N æ¬¡
}

// âœ… ä¼˜åŒ–: æ‰¹é‡æŸ¥è¯¢
userIDs := collectUserIDs(posts)
users := GetUsersByIDs(userIDs)  // 1 æ¬¡
```

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `dial tcp 127.0.0.1:3306: connect: connection refused`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ MySQL æ˜¯å¦å¯åŠ¨
mysql -u root -p

# macOS
brew services start mysql

# Linux
sudo systemctl start mysql
```

### 2. Redis è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `dial tcp 127.0.0.1:6379: connect: connection refused`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ Redis æ˜¯å¦å¯åŠ¨
redis-cli ping

# macOS
brew services start redis

# Linux
sudo systemctl start redis
```

### 3. Swagger æ–‡æ¡£ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°ç”Ÿæˆæ–‡æ¡£
swag init

# ç¡®ä¿å¯¼å…¥äº† docs åŒ…
# main.go ç¬¬ 7 è¡Œ: _ "bluebell/docs"

# é‡å¯æœåŠ¡
```

### 4. JWT Token è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä½¿ç”¨ refresh_token åˆ·æ–°
curl -X POST http://127.0.0.1:8080/api/v1/refresh_token \
  -H "Content-Type: application/json" \
  -d '{"refresh_token": "your_refresh_token"}'
```

### 5. Air çƒ­é‡è½½ä¸ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ .air.conf é…ç½®
# ç¡®ä¿ç›‘æ§äº†æ­£ç¡®çš„æ–‡ä»¶æ‰©å±•å
include_ext = ["go", "yaml"]

# é‡å¯ Air
pkill air
air
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

### æäº¤ Issue

- **Bug æŠ¥å‘Š**: è¯¦ç»†æè¿°é—®é¢˜ã€å¤ç°æ­¥éª¤ã€ç¯å¢ƒä¿¡æ¯
- **åŠŸèƒ½å»ºè®®**: è¯´æ˜éœ€æ±‚åœºæ™¯å’ŒæœŸæœ›æ•ˆæœ

### æäº¤ Pull Request

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤å˜æ›´ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### Commit Message è§„èŒƒ

éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒ:

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ Bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: é‡æ„ä»£ç 
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é“¾æ›´æ–°

**ç¤ºä¾‹:**
```
feat: å®ç°å¸–å­åˆ é™¤åŠŸèƒ½
fix: ä¿®å¤æŠ•ç¥¨é‡å¤è®¡æ•°é—®é¢˜
docs: æ›´æ–° API æ–‡æ¡£
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

- [Gin Web Framework](https://github.com/gin-gonic/gin) - é«˜æ€§èƒ½ HTTP æ¡†æ¶
- [sqlx](https://github.com/jmoiron/sqlx) - æ•°æ®åº“æ“ä½œå¢å¼º
- [Zap](https://github.com/uber-go/zap) - é«˜æ€§èƒ½æ—¥å¿—åº“
- [Viper](https://github.com/spf13/viper) - é…ç½®ç®¡ç†
- [Swagger](https://swagger.io) - API æ–‡æ¡£å·¥å…·

---

## ğŸ“® è”ç³»æ–¹å¼

- **é¡¹ç›®ä»“åº“**: [GitHub](https://github.com/yourusername/bluebell)
- **é—®é¢˜åé¦ˆ**: [Issues](https://github.com/yourusername/bluebell/issues)
- **æ•™å­¦æ–‡æ¡£**: è§ `æ•™å­¦æ–‡æ¡£/` ç›®å½•

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©,è¯·ç»™ä¸€ä¸ª Star â­**

**Made with â¤ï¸ by Go Developers**

[â¬† å›åˆ°é¡¶éƒ¨](#bluebell-ç¤¾åŒºè®ºå›)

</div>
